# Поисковой движок SearchEngineEleven
## 1 Описание проекта
Поисковой движок SearchEngineEleven осуществляет поиск среди набора документов. Поисковый движок представляет собой консольное приложение (исполняемый файл, запускаемый на любом сервере или компьютере),
осуществляющее поиск и имеющее возможность настройки через файлы формата
JSON.
### Принципы работы поискового движка:
1. В конфигурационном файле перед запуском приложения необходимо задать названия файлов, по которым движок будет осуществлять поиск.
2. Поисковый движок самостоятельно обходит все файлы и
индексирует их так, чтобы потом по любому поисковому запросу была возможность найти наиболее релевантные документы.
3. Пользователь задаёт запрос через JSON-файл *requests.json*. Запрос — это набор слов, по которым нужно найти документы.
4. Запрос трансформируется в список слов.
5. В индексе ищутся те документы, на которых встречаются все эти слова.
6. Результаты поиска ранжируются, сортируются и отдаются пользователю,
максимальное количество возможных документов в ответе задаётся в
конфигурационном файле.
7. В конце программа формирует файл *answers.json*, в который записывает
результаты поиска.
## 2 Описание стека используемых технологий.
-	STL (Standard Template Library) для C++ — стандартная библиотека шаблонов, которая предоставляет набор готовых шаблонных классов и функций для работы с данными, их обработки и организации.
-	[nlohmann/json : JSON for Modern C++](https://github.com/nlohmann/json) - библиотека для работы с JSON в C++.
-	[Cmake](https://cmake.org/) - кроссплатформенное программное средство автоматизации сборки программного обеспечения из исходного кода.
-	[Gtest (Google Test)](https://github.com/google/googletest) — это фреймворк для модульного тестирования C++-приложений.
## 3 Инструкция по запуску
1)	Распакуйте архив.
2)	Перейдите в директорию проекта, создайте в ней директорию "build".
3)	Перейдите в созданную директорию, запустите в ней терминал Windows (Контекстное меню -> «Открыть в терминале»).
4)	В терминале выполните команду: `cmake ..`.
5)	Дождитесь завершения выполнения команды. Вы увидите в терминале сообщение: `-- Build files have been written to: Диск:/Путь/к/папке/build`.
6)	В терминале выполните команду: `--build . --config Release --target all`.
7)	Дождитесь завершения выполнения команды.
8)	Перенесите файлы *requests.json, answers.json, config.json*, а также папку *../resources* с файлами, по которым будет осуществляться поиск, в директорию с приложением *search_engine.exe*.
9)	В терминале выполните команду для запуска программы: `.\search_engine.exe`.
10)	Дождитесь завершения работы программы. Вы увидите в терминале сообщение: "SearchEngineEleven" starts working... .
11)	Результаты поиска помещены в файл *answers.json*.
## 4 Описание конфигурационных файлов
### 1. Файл конфигурации *config.json*.
Без него запуск приложения невозможен. Он содержит название поискового движка,
его версию, время обновления базы (с какой периодичностью необходимо делать
переиндексирование базы, заново подгружать файлы и обсчитывать их поисковый
рейтинг), максимальное количество вариантов в ответе (если не указано, то значение
выбирается равным пяти).

Пример описания файла *config.json*:
```    
{
  "config": {
    "name": "SkillboxSearchEngine",
    "version": "0.1",
    "max_responses": 5
    },
  "files": [
    "../resources/file001.txt",
    "../resources/file002.txt",
    "../resources/file003.txt",
    "../resources/file004.txt",
    ..
  ]
}
```
Поля файла *config.json*:
- config — общая информация, без которой приложение не запускается. Если это
поле отсутствует, то при старте программа выводит в текстовую консоль ошибку «config file is empty». Если отсутствует сам файл config.json, то выводится ошибка «config file is missing».
- name — поле с названием поискового движка. 
- version — поле с номером версии поискового движка.
- max_responses — поле, определяющее максимальное количество ответов на
один запрос.
- files содержит пути к файлам, по которым необходимо осуществлять поиск.
Внутри списка files лежат пути к файлам.
- <путь к файлу>(“../resorces/file001.txt”) — это путь к файлу. Впоследствии по его
содержимому совершается поиск. Если по этому пути файл не
существует, то на экран выводится соответствующая ошибка, но выполнение
программы не прекращается. При этом каждый документ содержит не более
1000 слов с максимальной длиной каждого в 100 символов. Слова
состоят из строчных латинских букв и разделены одним или несколькими
пробелами.
### 2. Файл с запросами *requests.json*.
Он содержит запросы, которые необходимо обработать поисковому движку.

Пример описания файла *requests.json*:
```
{
"requests": [
  "some words..",
  "some words..",
  "some words..",
  "some words..",
  …
]
}
```
Поля файла *requests.json*:
- requests состоит из списка запросов, которые необходимо обработать
поисковым движком. Поле содержит не более 1000 запросов, каждый из
которых включает от одного до десяти слов.
- <содержимое запроса>(“some words”) — поисковый запрос, набор слов,
разделённых одним или несколькими пробелами. По ним осуществляется поиск. Все слова состоят из строчных латинских букв.
### 3. Файл с ответами на запросы *answers.json*.
В него записываются результаты работы поискового движка. 

Пример описания файла *answers.json*:
```
{
  "answers": {
    "request001": {
      "result": "true",
        "relevance": {
            "docid": 0, “rank” : 0.989,
            "docid": 1, “rank” : 0.897,
            "docid": 2, “rank” : 0.750,
            "docid": 3, “rank” : 0.670,
            "docid": 4, “rank” : 0.561
          }
      },
    "request002": {
      "result": "true",
      "docid": 0, “rank” : 0.769
    },
    "request003": {
      "result": "false"
      }
  }
}
```
Поля файла *answers.json*:
- answers — базовое поле в этом файле, которое содержит ответы на запросы.
- request001 … 003 — идентификатор запроса, по которому сформирован ответ.
Идентификатор запроса формируется автоматически по порядку, в котором
находятся запросы в поле requests файла requests.json. Например:
```
"requests": [
  "some words..", для данной строки id запроса будет равен “request001”
  "some words..", для данной строки id запроса будет равен “request002”
  "some words..", для данной строки id запроса будет равен “request003”
  "some words..", для данной строки id запроса будет равен “request004”
…
]
```
- result – результат поиска запроса. Если он принимает значение true, значит по
данному запросу найден хотя бы один документ. Если результат имеет значение
false, значит ни одного документа не найдено. Тогда других полей в ответе на
этот запрос нет.
- relevance включается в файл answers.json, если на этот запрос удалось найти
более одного документа.
Далее идут соответствия рейтинга ответа и названия id документа, в котором
осуществлялся поиск:
- <Идентификатор документа>("docid") — идентификатор документа, в котором
найден ответ на запрос. Он формируется автоматически при индексации всех
документов исходя из порядка, в котором документы расположены в поле files в
файле config.json. Например, если в поле config.json поле files содержит:
```
"files": [
"../resources/file001.txt", для данного файла docid будет равен 0
"../resources/file002.txt", для данного файла docid будет равен 1
"../resources/file003.txt", для данного файла docid будет равен 2
"../resources/file004.txt", для данного файла docid будет равен 3
…
]
```
- <ранг ответа>(“rank”) — ранг или поисковый рейтинг. Это число показывает,
насколько документ подходит для заданного запроса. В ответе id документов
располагаются в порядке уменьшения поискового рейтинга.



